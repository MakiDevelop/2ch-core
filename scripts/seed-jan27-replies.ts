#!/usr/bin/env tsx
/**
 * 2026/1/27 å›è¦†è£œå……è…³æœ¬
 * ç‚ºå›è¦†æ•¸å°‘çš„è¨è«–ä¸²è£œå……è‡ªç„¶å›è¦†
 */

import { Pool } from 'pg';
import crypto from 'crypto';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL || 'postgres://postgres:postgres@localhost:5432/2ch',
});

function generateIpHash(): string {
  const randomIp = `${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
  return crypto.createHash('sha256').update(randomIp).digest('hex');
}

const userAgents = [
  'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15',
  'Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36',
];

function randomUserAgent(): string {
  return userAgents[Math.floor(Math.random() * userAgents.length)];
}

async function insertReply(
  parentId: number,
  content: string,
  authorName: string = 'åç„¡ã—ã•ã‚“',
  hoursAgo: number = 1
): Promise<void> {
  await pool.query(
    `INSERT INTO posts (content, status, ip_hash, user_agent, parent_id, board_id, author_name, created_at)
     VALUES ($1, 0, $2, $3, $4, NULL, $5, NOW() - INTERVAL '1 hour' * $6)`,
    [content, generateIpHash(), randomUserAgent(), parentId, authorName, hoursAgo]
  );
}

async function main() {
  console.log('ğŸŒ± é–‹å§‹è£œå……å›è¦† (2026/1/27)...\n');

  // === #4410 (chat) ä»Šå¤©æ—©ä¸Š9é»04åˆ†æ±éƒ¨æµ·åŸŸåœ°éœ‡ æœ‰äººæ„Ÿè¦ºåˆ°å— â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼šç„¡æ„Ÿ(å°åŒ—)ã€èŠ±è“®å¾®æ™ƒã€4.2å¾ˆå°ä¸ç”¨æ“”å¿ƒã€å°ç£æ¯å¤©éƒ½åœ¨éœ‡ã€ä¸åƒ2024èŠ±è“®å¤§åœ°éœ‡å°±å¥½
  console.log('  ğŸ“ #4410 æ±éƒ¨æµ·åŸŸåœ°éœ‡');
  await insertReply(4410, '>>4412\nèŠ±è“®äººçš„æ—¥å¸¸www\næˆ‘å€‘é€™é‚Šé€£è²“éƒ½ä¸ç†', 'åç„¡ã—ã•ã‚“', 4);
  await insertReply(4410, 'å°æ±ä¹Ÿæœ‰æ„Ÿ\nä½†å°±æ™ƒä¸€ä¸‹è€Œå·²\nä¸åˆ°ä¸€ç§’', 'å°æ±äºº', 3.5);
  await insertReply(4410, '>>4415\né‚£æ¬¡çœŸçš„åš‡æ­»äºº\nåŠå¤œè¢«æ–é†’ä»¥ç‚ºä¸–ç•Œæœ«æ—¥', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4410, 'åœ°éœ‡é€Ÿå ±APPæ¨è–¦è£ä¸€å€‹\nè‡³å°‘æ¯”æ‰‹æ©Ÿåœ‹å®¶è­¦å ±å¿«å¹¾ç§’', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4410, 'ä½åœ¨æ±éƒ¨åå¹´äº†\n4ç´šä»¥ä¸‹æ ¹æœ¬ä¸ç”¨èµ·åºŠ', 'åç„¡ã—ã•ã‚“', 2);

  // === #4381 (gossip) Netflixæ›å…‰Honnoldè€å©†çœ‹ä»–çˆ¬101çš„è¦–è§’ å…¨å ´æœ€ç·Šå¼µ â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼šå£“åŠ›å¤§æ¯æ¬¡ç­‰é›»è©±ã€çœŸæ„›å°Šé‡é¸æ“‡ã€é‚£æ®µç•«é¢å¾ˆç·Šå¼µå¥¹æ¯”æˆ‘å‹‡æ•¢ã€Free Soloå¥¹åœ¨è»Šè£¡ç­‰ã€ä¸å¯èƒ½ç¿’æ…£åªæ˜¯å­¸æœƒé¢å°
  console.log('  ğŸ“ #4381 Honnoldçˆ¬101');
  await insertReply(4381, 'ä»–çˆ¬101é‚£å¤©æˆ‘å‰›å¥½åœ¨ä¿¡ç¾©å€\næŠ¬é ­çœ‹å·®é»åš‡æšˆ', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4381, '>>4385\nFree Soloé‚£æ®µEl Capitanæ”€çˆ¬æ˜¯å½±å²ç¶“å…¸\nçœ‹äº†æ‰‹å¿ƒå…¨æ˜¯æ±—', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4381, 'Netflixç´€éŒ„ç‰‡ä»€éº¼æ™‚å€™ä¸Š\nå¥½æƒ³çœ‹å®Œæ•´ç‰ˆ', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4381, '>>4386\nå¥¹åœ¨è¨ªå•ä¸­èªªéã€Œæˆ‘é¸æ“‡äº†é€™å€‹äºº\nå°±æ¥å—ä»–çš„å…¨éƒ¨ã€\nè¶…å¸¥', 'åç„¡ã—ã•ã‚“', 1.5);

  // === #4348 (life) å°å­©ç©¿åˆ·æ¯›è¡£æœèµ·ç´…ç–¹ ä¸æ˜¯éæ•æ˜¯è¡£æœçš„å•é¡Œ â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼šæˆ‘ä¹Ÿé‡éæ›è¡£æœå°±å¥½ã€å¤§äººä¹Ÿæœƒç™¢ã€åˆ·æ¯›ä¿æš–ä½†æ•æ„Ÿè‚Œä¸é©åˆã€Uniqlo HEATTECHä¹Ÿæœ‰äººéæ•ã€ç´”æ£‰+å¤–å¥—å®‰å…¨
  console.log('  ğŸ“ #4348 åˆ·æ¯›è¡£æœèµ·ç´…ç–¹');
  await insertReply(4348, '>>4352\nHEATTECHæˆ‘ç©¿äº†ä¹Ÿæœƒç™¢\nå¾Œä¾†æ”¹ç©¿æ£‰è³ªè¡›ç”Ÿè¡£', 'éæ•é«”è³ª', 3);
  await insertReply(4348, 'å°å­©çš„è¡£æœè²·ä¹‹å‰å…ˆæ´—ä¸€æ¬¡å†ç©¿\nå¯ä»¥æ¸›å°‘åˆºæ¿€', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4348, 'ç•°ä½æ€§çš®è†šç‚çš„å°å­©æ›´è¦æ³¨æ„\nåˆ·æ¯›çµ•å°ä¸è¡Œ', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4348, '>>4353\nåŒæ„\nå†¬å¤©æ´‹è”¥å¼ç©¿æ³•æœ€å®‰å…¨\nä¸ç”¨é åˆ·æ¯›', 'åç„¡ã—ã•ã‚“', 1.5);
  await insertReply(4348, 'æˆ‘å®¶å°å­©æ˜¯ç©¿åˆ°èµ·æ¿•ç–¹\né†«ç”Ÿä¹Ÿæ˜¯èªªæ›ç´”æ£‰\nå…©å¤©å°±å¥½äº†', 'æ–°æ‰‹çˆ¸åª½', 1);

  // === #4255 (news) è—ç™½æ”¾è¡Œ718å„„é ç®— æ”¿é™¢æ‰¹åªä½”2.4% â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼š2.4%æ„æ€ä¸€ä¸‹ã€æœ‰å‹•æ¯”ä¸å‹•å¥½ã€é¸èˆ‰å¹´ä¸æ•¢æ“‹æ°‘ç”Ÿã€TPASSæœ‰æ”¾è¡Œå—ã€æœé‡å¹´å¹´æ¼”äººæ°‘çœ‹è†©
  console.log('  ğŸ“ #4255 è—ç™½æ”¾è¡Œé ç®—');
  await insertReply(4255, '>>4259\nTPASSæ‡‰è©²æœ‰\né€™å€‹å¤ªå¤šäººç”¨äº†\nä¸æ”¾è¡Œæœƒè¢«ç½µæ­»', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4255, '718å„„è½èµ·ä¾†å¾ˆå¤š\nä½†åˆ†åˆ°å„éƒ¨æœƒå„è¨ˆç•«å°±ä¸å¤šäº†', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4255, '>>4260\nçœŸçš„\nåˆ°æœ€å¾Œéƒ½æ˜¯é¸æ°‘è²·å–®\né ç®—è¢«æ‹–å»¶çš„æˆæœ¬èª°ç®—', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4255, 'é‡é»ä¸æ˜¯æ”¾è¡Œå¤šå°‘\næ˜¯å¡äº†ä»€éº¼\næœ‰äººæ•´ç†å—', 'åç„¡ã—ã•ã‚“', 1.5);

  // === #4424 (meta) å¯ä»¥åŠ å€‹æœå°‹åŠŸèƒ½å— æ‰¾èˆŠæ–‡å¥½å›°é›£ â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼š+1æœå°‹æ˜¯åŸºæœ¬ã€å…ˆåšæœæ¨™é¡Œã€ç”¨Google site:æœä½†ä¸æ–¹ä¾¿ã€ç«™å…§æœå°‹ç¢ºå¯¦éœ€è¦ã€å¸Œæœ›èƒ½æŒ‰ç‰ˆå¡Šæœ
  console.log('  ğŸ“ #4424 æœå°‹åŠŸèƒ½å»ºè­°');
  await insertReply(4424, '>>4427\nsite:2ch.tw é€™æ‹›ä¸éŒ¯\nå…ˆé ‚è‘—ç”¨', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4424, 'å¦‚æœæŠ€è¡“ä¸Šç”¨PostgreSQLå…¨æ–‡æœå°‹å°±å¤ äº†\nä¸ç”¨ä¸ŠElasticsearch', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4424, '>>4429\næŒ‰ç‰ˆå¡Š+æŒ‰æ—¥æœŸç¯©é¸\né€™å…©å€‹æœ€å¯¦ç”¨', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4424, 'æ¨\nè¶Šä¾†è¶Šå¤šå¥½æ–‡è¢«åŸ‹åœ¨åº•ä¸‹æ‰¾ä¸åˆ°', 'åç„¡ã—ã•ã‚“', 1);

  // === #4430 (meta) å¸Œæœ›æœ‰æ¨æ’­é€šçŸ¥ æœ‰äººå›æˆ‘æ–‡çš„æ™‚å€™é€šçŸ¥æˆ‘ â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼šåŒ¿ååšé€šçŸ¥æœ‰é»å¥‡æ€ªä½†éœ€è¦ã€å¯ä»¥ç”¨RSSã€å…ˆåšç€è¦½å™¨æ¨æ’­ã€æ”¶è—åŠŸèƒ½å·²æœ‰é€šçŸ¥æ˜¯ä¸‹ä¸€æ­¥ã€æ¨å¸¸ç™¼å®Œå¿˜äº†å›ä¾†çœ‹
  console.log('  ğŸ“ #4430 æ¨æ’­é€šçŸ¥å»ºè­°');
  await insertReply(4430, '>>4432\nRSSå¥½ä¸»æ„\nä½†ç¾åœ¨å¹´è¼•äººèª°ç”¨RSSå•Š', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4430, 'åŒ¿åä¸ä»£è¡¨ä¸èƒ½è¿½è¹¤è‡ªå·±çš„ä¸²å§\nç”¨cookieå°±å¥½', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4430, '>>4433\nç€è¦½å™¨æ¨æ’­+1\næœ€ä½æˆæœ¬æœ€å¤§æ•ˆæœ', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4430, 'å…¶å¯¦ä¸²åº•ä¸‹åŠ å€‹ã€Œè¨‚é–±å›è¦†ã€æŒ‰éˆ•å°±å¥½\nä¸ç”¨åšåˆ°APPç­‰ç´š', 'åç„¡ã—ã•ã‚“', 1);

  // === #4436 (meta) å¯ä»¥æ–°å¢ã€Œç¾é£Ÿã€ç‰ˆå— â€” 5 replies ===
  // ç¾æœ‰å›è¦†ï¼šæ”¯æŒç¾é£Ÿ+æ—…éŠã€ç‰ˆå¤ªå¤šäººåˆ†æ•£å…ˆç”¨tagã€ç­‰ç”¨æˆ¶æ•¸ä¸Šä¾†å†é–‹ã€ç¾åœ¨ç‰ˆä¸å¤ ç†±é¬§ã€å¯µç‰©ç‰ˆä¹Ÿæƒ³è¦
  console.log('  ğŸ“ #4436 æ–°å¢ç¾é£Ÿç‰ˆ');
  await insertReply(4436, '>>4438\ntagåˆ†é¡å…ˆ+1\næ¿é–‹å¤ªå¤šåè€Œæ²’äººæ°£', 'åç„¡ã—ã•ã‚“', 3);
  await insertReply(4436, '>>4439\nåŒæ„ç­‰äººå¤šå†èªª\nç¾åœ¨chatç‰ˆå°±å¤ èŠäº†', 'åç„¡ã—ã•ã‚“', 2.5);
  await insertReply(4436, 'ä¸å¦‚å…ˆé–‹ä¸€å€‹ã€Œç”Ÿæ´»+ã€æŠŠç¾é£Ÿæ—…éŠå¯µç‰©éƒ½æ”¾é€²å»\nä¹‹å¾Œå†æ‹†', 'åç„¡ã—ã•ã‚“', 2);
  await insertReply(4436, '>>4441\nè²“è²“ç‰ˆæˆ‘ä¹Ÿè¦ï¼', 'åç„¡ã—ã•ã‚“', 1);

  // === #1305 (chat) å¦‚ä½•å’Œä¸­æƒ…å±€è¯çµ¡ â€” 4 replies ===
  // ç¾æœ‰å›è¦†ï¼š???ã€FBIæœƒå…ˆä¾†æ‰¾ä½ ã€ç¾åœ‹ä¹Ÿå¤ªæ˜é¡¯wwwã€æƒ³çŸ¥é“+1
  console.log('  ğŸ“ #1305 å¦‚ä½•å’Œä¸­æƒ…å±€è¯çµ¡');
  await insertReply(1305, '>>1339\nç¬‘æ­»\nåœ¨å°ç£æ‡‰è©²æ˜¯èª¿æŸ¥å±€å…ˆä¾†', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(1305, 'èªçœŸå›\nCIAå®˜ç¶²æœ‰å…¬é–‹çš„tipsæäº¤é é¢\nä¸éä»–å€‘æœƒä¸æœƒç†ä½ å°±...', 'åç„¡ã—ã•ã‚“', 5);
  await insertReply(1305, 'ä½ æ˜¯ä¸æ˜¯çœ‹å¤ªå¤šè«œå ±ç‰‡äº†www', 'åç„¡ã—ã•ã‚“', 4);

  console.log('\nâœ… å®Œæˆï¼ç‚º 8 å€‹è¨è«–ä¸²è£œå……äº†å›è¦†');
}

main()
  .then(() => pool.end())
  .catch((err) => {
    console.error('éŒ¯èª¤:', err);
    pool.end();
    process.exit(1);
  });
