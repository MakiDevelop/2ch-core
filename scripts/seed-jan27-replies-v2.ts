#!/usr/bin/env tsx
/**
 * 2026/1/27 å›è¦†è£œå……è…³æœ¬ v2
 * ç‚ºå›è¦†æ•¸å°‘çš„è¨è«–ä¸²è£œå……è‡ªç„¶å›è¦†
 */

import { Pool } from 'pg';
import crypto from 'crypto';

const pool = new Pool({
  connectionString: process.env.DATABASE_URL || 'postgres://postgres:postgres@localhost:5432/2ch',
});

function generateIpHash(): string {
  const randomIp = `${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}.${Math.floor(Math.random() * 255)}`;
  return crypto.createHash('sha256').update(randomIp).digest('hex');
}

const userAgents = [
  'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36',
  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',
  'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15',
  'Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36',
];

function randomUserAgent(): string {
  return userAgents[Math.floor(Math.random() * userAgents.length)];
}

async function insertReply(
  parentId: number,
  content: string,
  authorName: string = 'åç„¡ã—ã•ã‚“',
  hoursAgo: number = 1
): Promise<void> {
  await pool.query(
    `INSERT INTO posts (content, status, ip_hash, user_agent, parent_id, board_id, author_name, created_at)
     VALUES ($1, 0, $2, $3, $4, NULL, $5, NOW() - INTERVAL '1 hour' * $6)`,
    [content, generateIpHash(), randomUserAgent(), parentId, authorName, hoursAgo]
  );
}

async function main() {
  console.log('ğŸŒ± é–‹å§‹è£œå……å›è¦† v2 (2026/1/27)...\n');

  // === #1163 (chat) ç»é¦¬è¨˜ â€” 3 replies ===
  // YTå½±ç‰‡ï¼Œä½œè€…è‡ªå·±è£œå›ä¾†çš„å…§å®¹ï¼Œå›è¦†ï¼šå¥½æ‡·å¿µå°æ™‚å€™çœ‹éã€ä½œè€…æœ¬äººè£œçš„å¤ªæœ‰å¿ƒã€ç¶“å…¸
  console.log('  ğŸ“ #1163 ç»é¦¬è¨˜');
  await insertReply(1163, '>>1244\næˆ‘ä¹Ÿæ˜¯\nå°æ™‚å€™çœ‹åˆ°é€™æ®µè¶…æ„Ÿå‹•', 'åç„¡ã—ã•ã‚“', 36);
  await insertReply(1163, 'ä½œè€…è‡ªå·±è£œå®Œæ˜¯ä»€éº¼æ“ä½œwww\nå¤ªå¼·äº†å§', 'åç„¡ã—ã•ã‚“', 30);
  await insertReply(1163, 'ç¾åœ¨çš„å‹•ç•«éƒ½æ²’æœ‰é€™ç¨®å‘³é“äº†', 'åç„¡ã—ã•ã‚“', 24);
  await insertReply(1163, 'æ¨ä¸€å€‹\né€™ç¨®ä½œå“å€¼å¾—è¢«æ›´å¤šäººçœ‹åˆ°', 'åç„¡ã—ã•ã‚“', 18);

  // === #1168 (chat) è«§éŸ³å“ â€” 4 replies ===
  // æ–°èé€£çµ + ã€ŒçœŸæ˜¯è˜­ç¸ã€ï¼Œå›è¦†ï¼šé‡‘ç‰å ‚ã€è˜­ç¸æ˜¯ä»€éº¼æ¢—ã€é›£å—çš„è«§éŸ³ã€æ¨™é¡Œå¤ªç¡¬è¦äº†
  console.log('  ğŸ“ #1168 è«§éŸ³å“');
  await insertReply(1168, '>>1270\nè˜­ç¸ = é›£å— å•¦\nè«§éŸ³', 'åç„¡ã—ã•ã‚“', 30);
  await insertReply(1168, 'å°ç£æ–°èçœŸçš„å¾ˆæ„›è«§éŸ³æ¢—\nçœ‹åˆ°éƒ½å…ç–«äº†', 'åç„¡ã—ã•ã‚“', 24);
  await insertReply(1168, '>>1177\né‡‘ç‰å ‚æ˜¯ä»€éº¼www\næœ‰äººè§£é‡‹ä¸€ä¸‹', 'åç„¡ã—ã•ã‚“', 18);

  // === #128 (acg) è©­å¯“ â€” 4 replies ===
  // YTå½±ç‰‡ï¼Œå°ç£ææ€–éŠæˆ²ï¼Œå›è¦†ï¼šé€™æ˜¯ä»€éº¼éŠæˆ²ã€å°ç£ç¨ç«‹é–‹ç™¼ã€å°ç£ä¹Ÿæœ‰ææ€–éŠæˆ²ã€è¿”æ ¡é‚„é¡˜å¾ˆå¼·
  console.log('  ğŸ“ #128 è©­å¯“ï¼ˆå°ç£ææ€–éŠæˆ²ï¼‰');
  await insertReply(128, '>>675\nèµ¤ç‡­çœŸçš„æ˜¯å°ç£ä¹‹å…‰\næ¯æ¬¾éƒ½æœ‰è³ªæ„Ÿ', 'åç„¡ã—ã•ã‚“', 48);
  await insertReply(128, 'å°ç£ç¨ç«‹éŠæˆ²è¶Šä¾†è¶Šå¤šäº†\næ”¯æŒ', 'éŠæˆ²ç©å®¶', 42);
  await insertReply(128, 'è©­å¯“çš„æ°›åœç‡Ÿé€ å¾ˆä¸éŒ¯\næ¨è–¦è†½å­å¤§çš„å»ç©', 'åç„¡ã—ã•ã‚“', 36);
  await insertReply(128, 'ææ€–éŠæˆ²ç”¨è€³æ©Ÿç©é«”é©—å®Œå…¨ä¸ä¸€æ¨£\næœƒæ€•çš„ä¸è¦è¼•æ˜“å˜—è©¦', 'åç„¡ã—ã•ã‚“', 30);

  // === #1550 (news) åœŸæ–¹ä¹‹äº‚æå¾—å…¨å°å·¥ç¨‹éƒ½å»¶å®• â€” 5 replies ===
  // ç¾æ¿ƒå³½è°·â†’æ”¿åºœæ¨åœŸçŸ³æ–¹ç®¡åˆ¶â†’å…¨å°å·¥ç¨‹å»¶å®•ï¼Œå›è¦†ï¼šå¤ªèª‡å¼µã€æ–¹å‘å°ä½†å¤ªæ€¥ã€ç¼ºåœŸæ¼²åƒ¹ã€å·¥åœ°åœäº†ã€æ—©è©²ç®¡
  console.log('  ğŸ“ #1550 åœŸæ–¹ä¹‹äº‚');
  await insertReply(1550, '>>1553\nåœŸæ–¹åƒ¹æ ¼ç¿»å€äº†\nå°å»ºå•†å¿«æ’ä¸ä½', 'åç„¡ã—ã•ã‚“', 20);
  await insertReply(1550, 'GPSè·Ÿé›»å­è¯å–®ç³»çµ±åˆ°ç¾åœ¨é‚„å¸¸ç•¶æ©Ÿ\næ ¹æœ¬æ²’æº–å‚™å¥½å°±ä¸Šè·¯', 'åç„¡ã—ã•ã‚“', 16);
  await insertReply(1550, '>>1555\nè©²ç®¡æ˜¯è©²ç®¡\nä½†ä¸èƒ½ä¸€åˆ€åˆ‡\næ‡‰è©²è¦æœ‰éæ¸¡æœŸ', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(1550, 'å°ç£å…¬å…±å·¥ç¨‹çš„å•é¡Œä¸æ˜¯åªæœ‰åœŸæ–¹\næ•´å€‹ç™¼åŒ…åˆ¶åº¦éƒ½æœ‰å•é¡Œ', 'æ¥­ç•Œäººå£«', 8);

  // === #1556 (news) ä»Šå¤©å¤§å¯’ï¼Œå†·æ°£åœ˜å—ä¸‹ä¸­ â€” 5 replies ===
  // é›²è¡—è¡›æ˜Ÿé›²åœ–ï¼Œå›è¦†ï¼šé–‹æš–æ°£äº†ã€é›²è¡—æ˜¯ä»€éº¼ã€å†·ç©ºæ°£å½¢æˆæ¢ç‹€é›²ã€å°åŒ—14åº¦ã€å—éƒ¨é‚„å¥½
  console.log('  ğŸ“ #1556 å¤§å¯’å†·æ°£åœ˜');
  await insertReply(1556, '>>1560\n14åº¦ç©¿ç¾½çµ¨è¡£äº†\nåŒ—éƒ¨äººå¤ªè¾›è‹¦', 'ä¸­éƒ¨äºº', 20);
  await insertReply(1556, 'å¤§å¯’éå®Œå°±è¦ç«‹æ˜¥äº†\nå†æ’ä¸€ä¸‹', 'åç„¡ã—ã•ã‚“', 16);
  await insertReply(1556, '>>1561\nå—éƒ¨20åº¦å«å†·æˆ‘ä¸èƒ½æ¥å—', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(1556, 'æ¯å¹´æœ€å†·å°±æ˜¯é€™å¹¾å¤©\næš–æš–åŒ…æº–å‚™å¥½äº†', 'åç„¡ã—ã•ã‚“', 8);

  // === #3703 (acg) è²·å‹•æ¼«å°åŒ—æ——è‰¦åº—é–‹å¹•äº† â€” 5 replies ===
  // è¨±æ˜Œè¡—é–‹å¹•ï¼Œæœ‰å±•è¦½è·Ÿå’–å•¡å»³ï¼Œå›è¦†ï¼šå»é€›éä¸å¤§ä½†æ±è¥¿å¤šã€M6å‡ºå£å¥½æ‰¾ã€æœ‰å’–å•¡å»³ä¸éŒ¯ã€æ¡‚Guiç•«é¢¨è®šã€å¸Œæœ›é«˜é›„ä¹Ÿé–‹
  console.log('  ğŸ“ #3703 è²·å‹•æ¼«å°åŒ—æ——è‰¦åº—');
  await insertReply(3703, '>>3708\né«˜é›„äººå…ˆå“­\nä»€éº¼éƒ½è¦ç­‰', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(3703, 'å’–å•¡å»³çš„é¤é»æ€æ¨£ï¼Ÿæœ‰äººåƒéå—', 'åç„¡ã—ã•ã‚“', 9);
  await insertReply(3703, '>>3707\næ¡‚Guiçš„ã€Šä¾†è‡ªæ·±æ·µã€‹åŒäººè¶…è®š\næœ‰è²·åˆ°', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(3703, 'é€±æœ«å»äººå¾ˆå¤š\nå»ºè­°å¹³æ—¥å»\nå¯ä»¥æ…¢æ…¢é€›', 'åç„¡ã—ã•ã‚“', 3);

  // === #3709 (acg) 2026ä¸€æœˆæ–°ç•ªä½ åœ¨è¿½ä»€éº¼ â€” 5 replies ===
  // é¬¼æ»…æŸ±è¨“ç·´ã€æ€ªç¸8è™Ÿï¼Œå›è¦†ï¼šæ€ªç¸8è™Ÿæ‰“æˆ²çˆ½ã€ç„¡è·è½‰ç”Ÿå®Œçµç¯‡ã€é¬¼æ»…è£œå®Œã€å’’è¡“è¿´æˆ°ã€åœ°ä¸‹åŸè®Šæ…‹æ¨è–¦
  console.log('  ğŸ“ #3709 ä¸€æœˆæ–°ç•ª');
  await insertReply(3709, '>>3714\nåœ°ä¸‹åŸçš„äººéƒ½æ˜¯è®Šæ…‹è¶…å¥½çœ‹\nç•«é¢¨å¾ˆæ£’', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(3709, 'æ¨ã€Šè‘¬é€çš„èŠ™è‰è“®ã€‹ç¬¬äºŒå­£\næ²’è¿½çš„å¿«è£œ', 'åç„¡ã—ã•ã‚“', 9);
  await insertReply(3709, '>>3711\nç„¡è·è½‰ç”Ÿçµ‚æ–¼è¦å®Œçµäº†\nè¿½äº†å¥½å¹¾å¹´', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(3709, 'å†·é–€æ¨è–¦ã€Šè² è² å¾—æ­£ã€‹\næ—¥å¸¸ç³»ä½†å¾ˆç™‚ç™’', 'å‹•ç•«è¿·', 3);
  await insertReply(3709, 'é€™å­£å¼·ç•ªå¤ªå¤š\næ ¹æœ¬è¿½ä¸å®Œ', 'åç„¡ã—ã•ã‚“', 1);

  // === #3962 (news) 115å¹´ä¸­å¤®æ”¿åºœç¸½é ç®—é‚„å¡åœ¨ç«‹é™¢ â€” 5 replies ===
  // é ç®—å¯©ä¸éå“æ¦®æ³°å–Šè©±ï¼Œå›è¦†ï¼šTPASSä¸è¦å¡ã€æœé‡é¬¥äººæ°‘å€’éœ‰ã€å»å¹´ä¹Ÿæ‹–ã€å°‘æ•¸æ”¿åºœæ•ˆç‡ä½ã€æ°‘çœ¾é»¨æ‹¿ç±Œç¢¼
  console.log('  ğŸ“ #3962 ç¸½é ç®—å¡é—œ');
  await insertReply(3962, '>>3967\nå°é»¨æ‹¿é ç®—ç•¶ç±Œç¢¼\nå¾ˆæœ‰ç­–ç•¥ä½†äººæ°‘å—å®³', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(3962, 'å…¬å‹™å“¡ä¹Ÿå¾ˆç„¡å¥ˆ\næ²’é ç®—ä»€éº¼éƒ½ä¸èƒ½åš', 'å…¬å‹™å“¡', 9);
  await insertReply(3962, '>>3963\nTPASSæœˆç¥¨ç¢ºèªæœ‰æ”¾è¡Œäº†\nè‡³å°‘é€™å€‹æ²’å¡', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(3962, 'ç¾åœ‹ä¹Ÿå¸¸ç™¼ç”Ÿæ”¿åºœé—œé–€\næ°‘ä¸»åœ‹å®¶çš„é€šç—…', 'åç„¡ã—ã•ã‚“', 3);

  // === #3975 (news) å°å—åƒåœ¾è»Šé‹°é›»æ± çˆ†ç‚¸èµ·ç« â€” 5 replies ===
  // é‹°é›»æ± å¼•èµ·åƒåœ¾è»Šèµ·ç«ï¼Œå›è¦†ï¼šç†±å¤±æ§ææ€–ã€ç¤¾å€ä¹Ÿç‡’éã€ä¸èƒ½ä¸Ÿä¸€èˆ¬åƒåœ¾ã€è¶…å•†3Cå›æ”¶ã€æ¸…æ½”éšŠå“¡å±éšª
  console.log('  ğŸ“ #3975 é‹°é›»æ± çˆ†ç‚¸');
  await insertReply(3975, '>>3979\nè¶…å•†å›æ”¶å¾ˆæ–¹ä¾¿\nä½†å¾ˆå¤šäººä¸çŸ¥é“å¯ä»¥é€™æ¨£åš', 'åç„¡ã—ã•ã‚“', 12);
  await insertReply(3975, 'é›»å‹•æ»‘æ¿è»Šçš„é›»æ± æ›´å¤§é¡†\nå‡ºäº‹æ›´åš´é‡', 'åç„¡ã—ã•ã‚“', 9);
  await insertReply(3975, '>>3980\næ¸…æ½”éšŠçœŸçš„è¾›è‹¦\nä»€éº¼æ±è¥¿éƒ½å¾€åƒåœ¾è»Šä¸Ÿ', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(3975, 'æ”¿åºœæ‡‰è©²å¤šå®£å°\nå¾ˆå¤šé•·è¼©å®Œå…¨ä¸çŸ¥é“é‹°é›»æ± è¦å¦å¤–å›æ”¶', 'åç„¡ã—ã•ã‚“', 3);

  // === #4298 (money) å…¨å‹¤çé‡‘æ–°è¦å®š â€” 5 replies ===
  // å…¨å‹¤çé‡‘=å·¥è³‡ä¸€éƒ¨åˆ†ï¼Œè«‹å‡æ”¹æŒ‰æ¯”ä¾‹æ‰£ï¼Œå›è¦†ï¼šè®Šç›¸æ‰£è–ªæ—©è©²æ”¹ã€æˆ‘å…¬å¸2000è«‹ä¸€å¤©å°±æ²’ã€å‚³ç”¢é‚„åœ¨ç”¨ã€ä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å°ç­–ã€ä½µå…¥åº•è–ªæœ€å¥½
  console.log('  ğŸ“ #4298 å…¨å‹¤çé‡‘æ–°åˆ¶');
  await insertReply(4298, '>>4302\nçœŸçš„\nå…¬å¸æ”¹å«ã€Œç¸¾æ•ˆçé‡‘ã€å°±ç¹éå»äº†', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(4298, 'ç§‘æŠ€æ¥­æ ¹æœ¬æ²’å…¨å‹¤çé‡‘\nå‚³ç”¢æ‰æœ‰\nç„¶å¾Œç”¨ä¾†å£“æ¦¨', 'å·¥ç¨‹å¸«', 5);
  await insertReply(4298, '>>4303\nåŒæ„\nåº•è–ª+å…¨å‹¤çé‡‘çš„åˆ¶åº¦æ ¹æœ¬æ˜¯çŒæ°´åº•è–ª', 'åç„¡ã—ã•ã‚“', 4);
  await insertReply(4298, 'æˆ‘ä¹‹å‰å…¬å¸å…¨å‹¤5000\nç”Ÿç—…éƒ½ä¸æ•¢è«‹å‡\nå¤ªä¸äººé“', 'åç„¡ã—ã•ã‚“', 3);

  // === #4375 (gossip) ç‹å®‡å©•è–èª•å‰ä½é™¢ â€” 5 replies ===
  // èº«é«”ä¸èˆ’æœä½é™¢æ¯”æƒ³åƒåš´é‡ï¼Œå›è¦†ï¼šå…«é»æª”å¥½çœ‹å¸Œæœ›æ²’äº‹ã€è—äººå£“åŠ›å¤§ã€å°Šé‡éš±ç§ã€å®šæœŸå¥æª¢é‡è¦ã€ç¥åº·å¾©
  console.log('  ğŸ“ #4375 ç‹å®‡å©•ä½é™¢');
  await insertReply(4375, '>>4378\nå°\nç­‰å¥¹è‡ªå·±é¡˜æ„èªªå†é—œå¿ƒå°±å¥½', 'åç„¡ã—ã•ã‚“', 6);
  await insertReply(4375, 'è—äººçš„å·¥æ™‚çœŸçš„å¾ˆä¸æ­£å¸¸\næ‹æˆ²ç¶“å¸¸åå¹¾å€‹å°æ™‚', 'åç„¡ã—ã•ã‚“', 5);
  await insertReply(4375, '>>4379\nçœŸçš„\n30æ­²ä»¥å¾Œä¸€å®šè¦æ¯å¹´å¥æª¢\nä¸è¦æ‹–', 'åç„¡ã—ã•ã‚“', 4);
  await insertReply(4375, 'ç¥å¹³å®‰\nèº«é«”æœ€é‡è¦\nå·¥ä½œå¯ä»¥å†æ‰¾', 'åç„¡ã—ã•ã‚“', 3);

  console.log('\nâœ… å®Œæˆï¼ç‚º 11 å€‹è¨è«–ä¸²è£œå……äº†å›è¦†');
}

main()
  .then(() => pool.end())
  .catch((err) => {
    console.error('éŒ¯èª¤:', err);
    pool.end();
    process.exit(1);
  });
