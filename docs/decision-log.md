# Decision Log

本文件記錄專案中的重要決策，包含「為什麼這樣選擇」而非僅記錄「做了什麼」。

---

## 記錄原則

**必須記錄的情境：**
- 選擇 mock / fake / replay 而非真實系統
- 否決或推翻任何 AI (Claude / Gemini / Codex) 的建議
- 技術選型、架構取捨、有明顯 trade-off 的決策
- 為了推進進度而暫時接受「不完美方案」

**格式範本：**
```
### YYYY-MM-DD: [決策標題]

**背景：** 為什麼需要做這個決定
**選項：** 考慮過的方案
**決策：** 最終選擇
**理由：** 為什麼這樣選
**風險/TODO：** 未來需要注意或回收的事項
```

---

## 2026-01-22: 編輯標記 10 分鐘後自動隱藏

**背景：** 用戶回報「編輯只給 10 分鐘，顯示『2小時前 編輯』沒有意義」

**選項：**
1. 保持原樣，永久顯示編輯標記
2. 編輯窗口過期後隱藏標記
3. 編輯窗口過期後顯示刪除線

**決策：** 選項 2 - 編輯窗口（10 分鐘）過期後隱藏 `已編輯` 標記

**理由：**
- 編輯功能的目的是讓用戶在發文後短時間內修正錯誤
- 超過編輯窗口後，顯示「已編輯」不再提供有用資訊
- 實作簡單，無效能影響（純前端時間比較）

**風險/TODO：** 無

---

## 2026-01-21: Board Page SSR for OG Tags

**背景：** 社群分享板塊連結時，OG tags 顯示預設值而非板塊資訊

**選項：**
1. 純前端 JavaScript 更新 meta tags（爬蟲無法執行 JS）
2. Server-Side Rendering (SSR) 在後端注入正確的 OG tags

**決策：** 選項 2 - 實作 `boardPageMiddleware` 進行 SSR

**理由：**
- 社群爬蟲（Facebook、LINE、Twitter）不執行 JavaScript
- 必須在 HTML response 中直接包含正確的 OG meta tags
- 已有 `threadPageMiddleware` 作為參考，架構一致

**風險/TODO：** 無

---

## 2026-01-21: Mobile Tooltip 改為 Modal 呈現

**背景：** 用戶回報手機版 Safari 無法關閉語法說明 tooltip

**選項：**
1. 修復 hover 行為在觸控裝置的問題
2. 改為 tap-to-toggle 並以 modal 呈現

**決策：** 選項 2 - 手機版改為置中 modal + 半透明背景 + 關閉按鈕

**理由：**
- 觸控裝置沒有 hover 概念，hover-based UI 本質上有問題
- Modal 呈現更符合手機使用習慣
- 關閉按鈕提供明確的關閉方式

**風險/TODO：** 無

---

## 記錄守則提醒

> **Claude 必須：**
> - 在做出任何符合上述情境的決策時，主動提醒人類是否需要記錄
> - 不得假設「這很明顯不需要記錄」
>
> **人類原則：**
> - 寧可多記不可漏記
> - 記錄要讓未來的自己和 AI 都能理解
